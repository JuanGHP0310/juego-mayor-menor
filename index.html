<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lo más buscado en Google — Modo Google</title>
  <style>
    :root {
      --bg: #0b1220;
      --card: #111a2b;
      --card-2: #0e1726;
      --text: #e6eefc;
      --muted: #9fb2d0;
      --accent: #4ea1ff;
      --good: #1db954;
      --bad: #ff4d4f;
      --yellow: #ffc107;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; background: var(--bg); color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      min-height: 100vh; display: grid; grid-template-columns: 260px 1fr 300px; grid-template-rows: auto 1fr auto;
      grid-template-areas: "sidebar header right" "sidebar main right" "footer footer footer";
    }
    header {
      grid-area: header; padding: 16px 20px; border-bottom: 1px solid #1d2a44; display:flex; align-items:center; gap:12px;
    }
    header h1 { margin: 0; font-size: 20px; letter-spacing: 0.3px; }
    header .score { margin-left: auto; font-weight: 700; }
    aside.left {
      grid-area: sidebar; border-right: 1px solid #1d2a44; padding: 16px; background: var(--card);
    }
    aside.right {
      grid-area: right; border-left: 1px solid #1d2a44; padding: 16px; background: var(--card);
    }
    main {
      grid-area: main; padding: 20px; display: grid; place-items: center;
    }
    footer {
      grid-area: footer; border-top: 1px solid #1d2a44; padding: 10px 16px; background: var(--card-2);
      color: var(--muted); font-size: 12px;
    }
    .mode-select button {
      width: 100%; padding: 10px 12px; background: #0c182a; color: var(--text);
      border: 1px solid #22314e; border-radius: 12px; margin-bottom: 10px; cursor: pointer;
      transition: transform .06s ease, border-color .2s ease;
    }
    .mode-select button:hover { transform: translateY(-1px); border-color: var(--accent); }
    .ad-placeholder {
      background: linear-gradient(135deg, #101a2b, #0d1625);
      border: 1px dashed #2a3a5e; color: var(--muted); height: 100%;
      border-radius: 14px; display: grid; place-items: center; text-align: center; padding: 16px;
    }
    .ad-placeholder.small { height: 120px; margin-top: 16px; }
    .game {
      display:grid; grid-template-columns: 1fr 80px 1fr; gap: 20px; align-items:center; width: min(100%, 1100px);
    }
    .vs { text-align:center; color: var(--muted); }
    .card {
      background: var(--card); border: 1px solid #1c2943; border-radius: 18px; padding: 16px;
      display: grid; gap: 12px; justify-items: center; position: relative;
      transition: transform .08s ease, border-color .2s ease, box-shadow .2s ease;
    }
    .card:hover { transform: translateY(-2px); border-color: #2c3e68; box-shadow: 0 8px 26px rgba(0,0,0,.28); }
    .img-wrap {
      width: 100%; height: 160px; background: #0f1930; border: 1px solid #172646; border-radius: 12px; display:grid; place-items:center; overflow:hidden;
    }
    .img {
      max-width: 90%; max-height: 90%;
      object-fit: contain; border-radius: 10px;
    }
    .name { font-size: 16px; font-weight: 700; text-align:center; min-height: 40px; }
    .value { font-size: 14px; color: var(--yellow); visibility: hidden; }
    .value.show { visibility: visible; }
    .actions {
      display:flex; gap:12px; justify-content:center; margin-top: 12px;
    }
    .btn {
      padding: 10px 16px; background: #0d1628; color: var(--text);
      border: 1px solid #1e2c4b; border-radius: 12px; cursor: pointer; font-weight: 600; letter-spacing:.2px;
      transition: transform .06s ease, border-color .2s ease, background .2s ease;
    }
    .btn:hover { transform: translateY(-1px); border-color: var(--accent); }
    .btn.primary { background: #11213d; border-color: #23365c; }
    .btn.good { background: #103720; border-color: #1db954; }
    .btn.bad { background: #3a1111; border-color: #ff4d4f; }
    .disabled { pointer-events: none; opacity: .6; }
    .hint { color: var(--muted); font-size: 12px; text-align:center; }
    .pill { font-size: 11px; color: #9fb2d0; border:1px solid #22314e; padding: 3px 8px; border-radius: 999px; }
  </style>
</head>
<body>
  <aside class="left">
    <h3>Modos</h3>
    <div class="mode-select">
      <button class="btn" onclick="alert('Ya está en Modo Google')">Modo Google</button>
      <button class="btn" onclick="alert('Otros modos (Marvel / Universo) se añadirán después')">Marvel</button>
      <button class="btn" onclick="alert('Otros modos (Universo) se añadirán después')">¿Qué hay más?</button>
    </div>
    <div class="hint">* Espacio reservado para selector de modos definitivo.</div>
  </aside>

  <header>
    <h1>Lo más buscado en Google — <span class="pill">Modo Google</span></h1>
    <div class="score">Puntuación: <span id="score">0</span></div>
  </header>

  <main>
    <div class="game" id="game">
      <div class="card" id="leftCard">
        <div class="img-wrap"><img id="leftImg" class="img" alt="Imagen izquierda"></div>
        <div id="leftName" class="name"></div>
        <div id="leftValue" class="value"></div>
        <button id="btnLeft" class="btn primary">Elegir</button>
      </div>
      <div class="vs"><h2>VS</h2></div>
      <div class="card" id="rightCard">
        <div class="img-wrap"><img id="rightImg" class="img" alt="Imagen derecha"></div>
        <div id="rightName" class="name"></div>
        <div id="rightValue" class="value"></div>
        <button id="btnRight" class="btn primary">Elegir</button>
      </div>
    </div>

    <div class="actions">
      <button id="btnContinuar" class="btn good disabled">Continuar</button>
      <button id="btnReiniciar" class="btn bad disabled">Reiniciar</button>
    </div>
    <p class="hint">Elija la opción con <strong>más búsquedas mensuales</strong>. Tras acertar, pulse “Continuar”. Si falla, pulse “Reiniciar”.</p>
  </main>

  <aside class="right">
    <div class="ad-placeholder">Zona reservada para banner lateral (300x600/250x600)</div>
    <div class="ad-placeholder small">Zona reservada para banner pequeño (300x250)</div>
  </aside>

  <footer>
    Datos: estimaciones públicas (Ahrefs, julio 2025). Este es un prototipo funcional. © 2025
  </footer>

<script>
const DATA_URL = "./data/google_data_final.json";

let dataset = [];
let currentPair = null;
let score = 0;
let gameLocked = false;
let lastRightIndex = -1;

function $(id) { return document.getElementById(id); }

function formatNumber(n) {
  return n.toLocaleString('es-ES');
}

function pickTwo() {
  if (dataset.length < 2) return null;
  // ensure two different and avoid repeating right item consecutively to keep flow fresh
  let i = Math.floor(Math.random() * dataset.length);
  let j;
  do { j = Math.floor(Math.random() * dataset.length); } while (j === i || j === lastRightIndex);
  lastRightIndex = j;
  return [dataset[i], dataset[j]];
}

function showPair(pair) {
  const [A, B] = pair;
  // reset
  gameLocked = false;
  $("btnLeft").classList.remove("disabled");
  $("btnRight").classList.remove("disabled");
  $("btnContinuar").classList.add("disabled");
  $("btnReiniciar").classList.add("disabled");
  $("leftValue").classList.remove("show");
  $("rightValue").classList.remove("show");

  // fill
  $("leftImg").src = A.image;
  $("leftImg").onerror = function() { this.src = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMTQwIiB2aWV3Qm94PSIwIDAgMjAwIDE0MCI+CiAgICA8cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE0MCIgZmlsbD0icmdiKDI0NSwyNDgsMjUyKSIvPgogICAgPHJlY3QgeD0iMTAiIHk9IjEwIiB3aWR0aD0iMTgwIiBoZWlnaHQ9IjEyMCIgcng9IjEyIiByeT0iMTIiIGZpbGw9InJnYigxNjgsMTYwLDE5NykiIC8+CiAgICA8dGV4dCB4PSI1MCUiIHk9IjUwJSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIKICAgICAgICAgIGZvbnQtZmFtaWx5PSJzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIFNlZ29lIFVJLCBSb2JvdG8sIEFyaWFsLCBzYW5zLXNlcmlmIgogICAgICAgICAgZm9udC1zaXplPSIyMiIgZmlsbD0id2hpdGUiPkltYWdlbjwvdGV4dD4KICAgIDwvc3ZnPg=="; };
  $("leftName").textContent = A.name;
  $("leftValue").textContent = formatNumber(A.value) + " búsquedas/mes";

  $("rightImg").src = B.image;
  $("rightImg").onerror = function() { this.src = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMTQwIiB2aWV3Qm94PSIwIDAgMjAwIDE0MCI+CiAgICA8cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE0MCIgZmlsbD0icmdiKDI0NSwyNDgsMjUyKSIvPgogICAgPGNpcmNsZSBjeD0iMTAwIiBjeT0iNzAiIHI9IjQ2IiBmaWxsPSJyZ2IoMjMwLDE2NiwxMjgpIiAvPgogICAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiCiAgICAgICAgICBmb250LWZhbWlseT0ic3lzdGVtLXVpLCAtYXBwbGUtc3lzdGVtLCBTZWdvZSBVSSwgUm9ib3RvLCBBcmlhbCwgc2Fucy1zZXJpZiIKICAgICAgICAgIGZvbnQtc2l6ZT0iMjIiIGZpbGw9IndoaXRlIj5JbWFnZW48L3RleHQ+CiAgICA8L3N2Zz4="; };
  $("rightName").textContent = B.name;
  $("rightValue").textContent = formatNumber(B.value) + " búsquedas/mes";
}

function evaluate(choice) {
  if (gameLocked) return;
  const [A, B] = currentPair;
  const leftWins = A.value >= B.value;
  const rightWins = B.value >= A.value;
  $("leftValue").classList.add("show");
  $("rightValue").classList.add("show");

  // lock choice buttons
  $("btnLeft").classList.add("disabled");
  $("btnRight").classList.add("disabled");
  gameLocked = true;

  if ((choice === 'left' && leftWins) || (choice === 'right' && rightWins)) {
    // correct
    score += 1;
    $("score").textContent = score;
    $("btnContinuar").classList.remove("disabled");
  } else {
    // wrong
    $("btnReiniciar").classList.remove("disabled");
  }
}

function continuar() {
  if ($("btnContinuar").classList.contains("disabled")) return;
  currentPair = pickTwo();
  showPair(currentPair);
}

function reiniciar() {
  if ($("btnReiniciar").classList.contains("disabled")) return;
  score = 0;
  $("score").textContent = score;
  currentPair = pickTwo();
  showPair(currentPair);
}

function init() {
  fetch(DATA_URL).then(r => r.json()).then(arr => {
    dataset = arr;
    // initial pair
    currentPair = pickTwo();
    showPair(currentPair);
    // handlers
    $("btnLeft").onclick = () => evaluate('left');
    $("btnRight").onclick = () => evaluate('right');
    $("btnContinuar").onclick = continuar;
    $("btnReiniciar").onclick = reiniciar;
  }).catch(err => {
    console.error('Error cargando datos', err);
    const main = document.querySelector('main');
    main.innerHTML = "<p>Hubo un problema cargando los datos.</p>";
  });
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
